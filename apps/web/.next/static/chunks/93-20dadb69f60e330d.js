"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93],{7093:function(e,t,a){a.d(t,{zx:function(){return i},ZB:function(){return f},X2:function(){return p},oj:function(){return g},Mr:function(){return m},Y7:function(){return h},lw:function(){return b}});var s=a(4519),n=a(5978);let l={xs:"px-1.5 py-0.5 text-xs",sm:"px-2 py-1 text-sm",md:"px-3 py-2",lg:"px-4 py-3 text-lg"},r={primary:"bg-primary-neon text-black hover:bg-primary-neon/90",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300",ghost:"bg-transparent text-primary-neon hover:bg-primary-neon/10"},i=e=>{let{children:t,label:a,onClick:n,variant:i="primary",size:c="md",disabled:o=!1,className:d="",fullWidth:m=!1,type:u="button"}=e;return(0,s.jsx)("button",{type:u,onClick:n,disabled:o,className:"rounded-md font-medium transition focus:ring-2 focus:ring-focus-outline focus:outline-none ".concat(m?"w-full flex items-center":""," ").concat(l[c]," ").concat(r[i]," ").concat(o?"opacity-50 cursor-not-allowed":""," ").concat(d),children:t||a})};var c=a(8283),o=a(4307),d=e=>{let{open:t,onClose:a,title:l,children:r}=e;return(0,s.jsx)(c.u.Root,{appear:!0,show:t,as:n.Fragment,children:(0,s.jsxs)(o.V,{as:"div",className:"relative z-50",onClose:a,children:[(0,s.jsx)(c.u.Child,{as:n.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50"})}),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,s.jsx)(c.u.Child,{as:n.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-4",children:(0,s.jsxs)(o.V.Panel,{className:"w-full max-w-md rounded-lg bg-surface-matte p-6 text-white shadow-xl",children:[l&&(0,s.jsx)(o.V.Title,{className:"mb-4 text-lg font-semibold",children:l}),r]})})})]})})};function m(e){let{duration:t,start:a,end:l,currentTime:r=0,highlights:i=[],waveform:c=[],showWaveform:o=!1,showHighlights:d=!1,onChange:m,onSeek:u}=e,[x,p]=(0,n.useState)(a),[h,g]=(0,n.useState)(l);return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"relative w-full h-12 bg-gray-200 rounded",children:[o&&c.length>0&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-end justify-around px-1",children:c.map((e,t)=>(0,s.jsx)("div",{className:"bg-gray-400 w-1 rounded-t",style:{height:"".concat(Math.max(100*e,2),"%")}},t))}),d&&i.map((e,a)=>{let n=e.start/t*100,l=(e.end-e.start)/t*100;return(0,s.jsx)("div",{className:"absolute top-0 h-2 ".concat({viral:"bg-red-400",engaging:"bg-blue-400",quotable:"bg-green-400"}[e.type]," opacity-70 rounded"),style:{left:"".concat(n,"%"),width:"".concat(l,"%")},title:"".concat(e.label," (").concat(e.confidence,"% confidence)")},a)}),(0,s.jsx)("div",{className:"absolute top-0 w-0.5 h-full bg-red-500",style:{left:"".concat(r/t*100,"%")}}),(0,s.jsx)("div",{className:"absolute top-2 h-8 bg-blue-500 opacity-30 rounded",style:{left:"".concat(x/t*100,"%"),width:"".concat((h-x)/t*100,"%")}}),(0,s.jsx)("div",{className:"absolute inset-0 cursor-pointer",onClick:e=>{let a=e.currentTarget.getBoundingClientRect(),s=(e.clientX-a.left)/a.width*t;null==u||u(s)}})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[(0,s.jsxs)("span",{children:[x.toFixed(1),"s"]}),(0,s.jsx)("input",{type:"range",min:0,max:t,step:"0.1",value:x,onChange:e=>{let t=Number(e.target.value);t>=0&&t<h&&(p(t),null==m||m(t,h))},className:"flex-1 accent-blue-500"}),(0,s.jsx)("input",{type:"range",min:0,max:t,step:"0.1",value:h,onChange:e=>{let a=Number(e.target.value);a<=t&&a>x&&(g(a),null==m||m(x,a))},className:"flex-1 accent-blue-500"}),(0,s.jsxs)("span",{children:[h.toFixed(1),"s"]})]})]})}a(7883);var u=a(9078);let x=[{key:"9:16",label:"Vertical (9:16)"},{key:"1:1",label:"Square (1:1)"},{key:"16:9",label:"Landscape (16:9)"}];function p(e){let{clipId:t,apiUrl:a}=e,l=a||u.env.NEXT_PUBLIC_API_URL||"",[r,c]=(0,n.useState)(!1),[o,m]=(0,n.useState)([]),[p,h]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!r)return;let e=async()=>{let e=await fetch("".concat(l,"/export/status/").concat(t));m((await e.json()).jobs)};e();let a=setInterval(e,3e3);return()=>clearInterval(a)},[r,t,l]);let g=async e=>{h(e);let a=await fetch("".concat(l,"/export/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clipId:t,preset:e})});if(a.ok){let{jobId:t}=await a.json();m(a=>[...a,{id:t,preset:e,status:"queued",createdAt:new Date().toISOString()}])}else alert("Failed to queue export");h(null)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i,{label:"Export",onClick:()=>c(!0)}),(0,s.jsx)(d,{open:r,onClose:()=>c(!1),title:"Export Clip",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("div",{className:"flex gap-2 mb-4",children:x.map(e=>{let{key:t,label:a}=e;return(0,s.jsx)(i,{label:p===t?"Queuingâ€¦":a,variant:"ghost",disabled:!!p,onClick:()=>g(t)},t)})}),(0,s.jsxs)("ul",{className:"flex flex-col gap-2 max-h-60 overflow-y-auto",children:[o.map(e=>{var t;return(0,s.jsxs)("li",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:(null===(t=x.find(t=>t.key===e.preset))||void 0===t?void 0:t.label)||e.preset}),(0,s.jsx)("span",{children:"complete"===e.status&&e.url?(0,s.jsx)("a",{href:e.url.replace("s3://","https://"),target:"_blank",rel:"noopener",className:"text-primary-neon underline",children:"Download"}):e.status})]},e.id)}),!o.length&&(0,s.jsx)("li",{className:"text-muted-foreground",children:"No exports yet"})]})]})})]})}function h(e){let{src:t,poster:a,currentTime:n,aspectRatio:l,className:r,onTimeUpdate:i}=e;return(0,s.jsx)("div",{className:"relative bg-black rounded-lg overflow-hidden ".concat(r||""),children:(0,s.jsxs)("video",{className:"w-full h-full",src:t,poster:a,controls:!0,style:{aspectRatio:l},onTimeUpdate:e=>null==i?void 0:i(e.currentTarget.currentTime),children:[(0,s.jsx)("source",{src:t,type:"video/mp4"}),"Your browser does not support the video tag."]})})}function g(e){let{platform:t,videoSrc:a,aspectRatio:n,title:l,description:r,hashtags:i}=e;return(0,s.jsxs)("div",{className:"rounded-lg p-4 ".concat({youtube:"bg-red-600",tiktok:"bg-black",instagram:"bg-gradient-to-r from-purple-500 to-pink-500",twitter:"bg-blue-500"}[t]),children:[(0,s.jsxs)("div",{className:"text-white text-sm font-medium mb-2 capitalize",children:[t," Preview"]}),(0,s.jsxs)("div",{className:"bg-white rounded overflow-hidden",children:[(0,s.jsx)("video",{className:"w-full h-48 object-cover",src:a,muted:!0,style:{aspectRatio:n},children:(0,s.jsx)("source",{src:a,type:"video/mp4"})}),l&&(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:l}),r&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:r}),i&&i.length>0&&(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:i.map((e,t)=>(0,s.jsxs)("span",{className:"text-xs text-blue-600",children:["#",e]},t))})})]})]})]})}function b(e){let{score:t,factors:a}=e,n=e=>e>=80?"bg-green-500":e>=60?"bg-yellow-500":e>=40?"bg-orange-500":"bg-red-500",l="number"==typeof t?t:t.overall,r="object"!=typeof t||Array.isArray(t)?a:[{name:"Engagement",score:t.engagement||0,weight:1},{name:"Trending",score:t.trending||0,weight:1},{name:"Uniqueness",score:t.uniqueness||0,weight:1},{name:"Timing",score:t.timing||0,weight:1}].filter(e=>e.score>0);return(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"text-6xl font-bold ".concat(l>=80?"text-green-500":l>=60?"text-yellow-500":l>=40?"text-orange-500":"text-red-500"),children:l}),(0,s.jsx)("div",{className:"text-gray-600 text-sm mt-1",children:"Viral Score"})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-6",children:(0,s.jsx)("div",{className:"h-3 rounded-full transition-all duration-500 ".concat(n(l)),style:{width:"".concat(l,"%")}})}),r&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:"Score Factors"}),r.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"h-2 rounded-full ".concat(n(e.score)),style:{width:"".concat(e.score,"%")}})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:e.score})]})]},t))]})]})}function f(e){let{captions:t,onCaptionsChange:a,currentTime:l,duration:r=60}=e,[i,c]=(0,n.useState)(null),o=t.map(e=>{var t,a,s,n;return{...e,startTime:null!==(a=null!==(t=e.startTime)&&void 0!==t?t:e.start)&&void 0!==a?a:0,endTime:null!==(n=null!==(s=e.endTime)&&void 0!==s?s:e.end)&&void 0!==n?n:2}}),d=(e,t)=>{a(o.map(a=>a.id===e?{...a,...t}:a))},m=e=>{a(o.filter(t=>t.id!==e))};return(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Caption Editor"}),(0,s.jsx)("button",{onClick:()=>{a([...o,{id:Date.now().toString(),text:"New caption",startTime:l||0,endTime:(l||0)+2}])},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Caption"})]}),(0,s.jsx)("div",{className:"space-y-3",children:o.map(e=>(0,s.jsxs)("div",{className:"border rounded-lg p-3 cursor-pointer transition-colors ".concat((null==i?void 0:i.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>c(e),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[e.startTime.toFixed(1),"s - ",e.endTime.toFixed(1),"s"]}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),m(e.id)},className:"text-red-500 hover:text-red-700 text-sm",children:"Delete"})]}),(0,s.jsx)("textarea",{value:e.text,onChange:t=>d(e.id,{text:t.target.value}),className:"w-full text-sm border-none resize-none outline-none",rows:2,onClick:e=>e.stopPropagation()})]},e.id))}),i&&(0,s.jsxs)("div",{className:"mt-6 p-4 border-t",children:[(0,s.jsx)("h4",{className:"font-medium mb-3",children:"Caption Timing"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time (s)"}),(0,s.jsx)("input",{type:"number",value:i.startTime,onChange:e=>d(i.id,{startTime:Math.max(0,Math.min(r,parseFloat(e.target.value)||0))}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",step:"0.1",min:"0",max:r})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time (s)"}),(0,s.jsx)("input",{type:"number",value:i.endTime,onChange:e=>d(i.id,{endTime:Math.max(i.startTime||0,Math.min(r,parseFloat(e.target.value)||0))}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",step:"0.1",min:i.startTime||0,max:r})]})]})]})]})}}}]);